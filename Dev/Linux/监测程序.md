## 探查进程

当程序运行再系统上时，我们称之为进程（process）。想检测这些进程，需要熟悉 ps 命令的用法。ps 命令好比工具中的瑞士军刀，他能输出运行再系统上的所有程序的许多信息。

遗憾的是，ps 是目前最难掌握的命令。

ps 在默认情况下不会提供那么多的信息，只会显示运行在当前控制台下的属于当前用户的进程。
![[Pasted image 20221201080558.png]]
会列出程序的进程 ID（ProcessID), 和它运行在哪个终端（TTY) 以及进程已用的 CPU 时间。
	![[Pasted image 20221201080715.png]]


ps 命令虽然在手机运行在系统上的进程信息时非常有用，但也有不足之处：它只能显示某个特定时间点的信息，如果先观察那些频繁患处的内存的进程趋势，用 ps 命令就不方便了。

### top

top 命令跟 ps 命令相似，能够显示进程信息，但它是实时显示的。

![[Pasted image 20221206201427.png]]

![[Pasted image 20221206201541.png]] ![[Pasted image 20221206201551.png]]

在默认的情况下，top 命令是按照 `%CPU` 值对进程排序。可以在 top 运行时使用多种交互命令重新排序。每个交互式命令都是单字符，在 top 命令运行时输入可改变 top 的行为。
- 输入 f 允许你选择对输出进行排序的字段
- 输入 d 允许你修改轮询间隔
- 输入 q 可以退出 top

用户在 top 命令的输出上有很大的控制权。用这个工具就能找出占用系统大部分资源的罪魁祸首。当然了，一旦找到，下一步就是结束这些进程。

### kill

Kill 命令可以通过 PID 给进程发信号。默认情况下，kill 命令会向命令行中列出的全部的全部的 PID 发送一个 TERM 信号。遗憾的是，你只能用进程的 PID 而不能用命令名，所以 kill 命令有时并不好用。
![[Pasted image 20221206202215.png]]

要发送进程信号，你必须是进程的属主或者是 root 用户。
TERM 信号告诉进程可能的话就停止运行。不过，如果有不服管教的进程，那它通常会忽略这个请求。如果要强制终止，`-o` 参数支持指定其他信号（用信号名或者信号值）。

### killall

killall 命令非常强大，它支持通过进程名而不是 PID 来结束进程。killall 命令也支持通配符。
例如: `killall http*` 表示结束所有以 http 开头的进程。
需要注意的是，如果当前是以 root 用户登录的，在执行 `killall http*` 可能会连带的将系统的 http 进程结束掉，这可能会破坏文件系统。

