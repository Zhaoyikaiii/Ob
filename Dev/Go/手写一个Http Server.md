## 理解网络协议层

![[Pasted image 20221129204147.png]]

- 链路层：传递 mac 地址
- 网络层：IP
- 传输层：IP+port

从浏览器

## 理解 Socket

- Socket 被翻译为“套接字”，它是计算机之间进行通信的一种约定或一种方式。
- Linux 中的一切都是文件，为了表示和区分已经打开的文件, UNIX/Linux 会给每个文件分配一个 ID, 这个 ID 就是一个整数，被称为文件描述符
- 网络连接也是一个文件，它也有文件描述符
- 服务器端先初始化 Socket, 然后与端口绑定（bind)，对端口进行监听（listen)，调用 accept 阻塞，等待客户端连接。
- 在这时如果有个客户端初始化一个 Socket，然后连接服务器（connect), 如果连接成功，这时客户端与服务器端的连接就建立了。
- 服务端的 Accept 接收到请求以后，会生成连接 FD, 借助这个 FD 我们就可以使用普通的文件操作函数来传输数据了，例如：
	- 用 read () 读取从远程计算机传来的数据
	- 用 write () 向远程计算机写入数据
![[Pasted image 20221129222216.png]]