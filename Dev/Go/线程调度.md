## 深入理解 Go 语言线程调度

- 进程： 资源分配的基本单位
- 线程：调度的单位
- 无论是线程还是进程，在 linux 中都以 task_struct 描述，从内核角度看，与进程无本质的区别
- Glibc 中的 pthread 库提供 NPTL (Native POSIX THreading Library) 支持
	- 在内核层面，线程就是和主线程共享资源的`task_struct `

## Linux 进程的内存使用 
![[Pasted image 20221128195540.png]]

Linux 进程开销和切换进程的开销

	一个计算机的内存是固定的,在早期可能一个程序访问一个内存直接对应的就是一个物理内存。这样存在的问题是，如果多个进程之间抢同一块物理内存，是会出现问题的。
	随着技术的迭代就出现了虚拟地址，对于一个计算机，比如拥有4g的内存，这些内存的物理地址是固定的，每起一个应用进程的时候，也可以对这个进程虚拟4g的内存空间出来，这些4g的内存全是虚拟出来的虚拟地址。

	 - text： 指令大小，在引用启动时所有的代码会被加载为程序代码`size`命令可以看到。
	 - Data: 初始化数据，在整个程序load的时候一些静态变量需要被加载并被初始化
	 - BSS:对于一些只是定义了，并没有给值的，这些数据会放入BSS。可以通过`objdump`查看。需要注意的是，Go语言并不支持静态变量，除非是写c的代码，通过go进行调用，否则写的代码是塞不进BSS和Data中的。
	 - dec = text + data + bss